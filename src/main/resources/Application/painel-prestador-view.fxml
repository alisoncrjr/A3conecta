<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="700.0" prefWidth="1000.0" stylesheets="@/Application/style.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controller.PainelPrestadorController">

    <children>
        <StackPane styleClass="app-shell" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">

            <children>
                <BorderPane styleClass="card mobile-card" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">

                    <!-- TOPO (igual ao cliente) -->
                    <top>
                        <HBox alignment="CENTER_LEFT" prefHeight="90.0" spacing="18" style="-fx-background-color: linear-gradient(to right, #007fff, #57aaff); -fx-padding: 0 20;">

                            <children>

                                <!-- LOGO -->
                                <ImageView fitHeight="100.0" fitWidth="124.0" preserveRatio="true" style="-fx-effect: dropshadow(gaussian, #003366, 10, 0.2, 0, 2);">
                                    <image>
                                        <Image url="@/icons/app_logo_white.png" />
                                    </image>
                                </ImageView>

                                <!-- TEXTOS DO CABEÇALHO -->
                                <VBox prefHeight="100.0" prefWidth="329.0" spacing="2">
                                    <children>
                                        <Label fx:id="labelNomePrestador" prefHeight="53.0" prefWidth="250.0" style="-fx-text-fill: white; -fx-font-size: 22; -fx-font-weight: bold;" text="Olá, Prestador!" />
                                        <Label style="-fx-text-fill: #e6f3ff; -fx-font-size: 14;" text="Gerencie seus contratos e interaja com clientes" />
                                    </children>
                                </VBox>

                                <!-- BOTOES À DIREITA (visual igual ao cliente, nomes mantidos) -->
                                <HBox alignment="CENTER_RIGHT" spacing="14" HBox.hgrow="ALWAYS">

                                    <children>

                                        <Button onAction="#handleGerenciarProjetos" style="-fx-background-color: white; -fx-text-fill: #005bbb; -fx-background-radius: 12;" text="Gerenciar Projetos" />

                                        <Button fx:id="btnMensagensToggle" onAction="#handleMostrarMensagensEnviadas" style="-fx-background-color: white; -fx-text-fill: #005bbb; -fx-background-radius: 12;" text="Mensagens Enviadas" />

                                        <Button onAction="#handleVerMeuPerfil" style="-fx-background-color: white; -fx-text-fill: #005bbb; -fx-background-radius: 12;" text="Meu Perfil" />

                                        <!-- AVATAR -->
                                        <ImageView fx:id="userProfileImageView" fitHeight="42" fitWidth="42" preserveRatio="true" style="-fx-background-radius: 50; -fx-clip: circle;" />

                                        <Button onAction="#handleSair" style="-fx-background-color: #ff4b4b; -fx-text-fill: white; -fx-background-radius: 12;" text="Sair" />

                                    </children>
                                </HBox>
                            </children>
                        </HBox>
                    </top>

                    <!-- CENTRO / ÁREA PRINCIPAL (estética ajustada p/ combinar) -->
                    <center>

                        <HBox alignment="TOP_CENTER" spacing="22">
                            <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>

                            <children>

                                <!-- LISTA DE CONTRATOS -->
                                <VBox fx:id="vboxContratos" alignment="TOP_CENTER" prefWidth="450" spacing="15" style="-fx-background-color: #ffffff; -fx-border-color: #c7ddf7; -fx-border-radius: 14; -fx-background-radius: 14;">

                                    <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>

                                    <children>

                                        <Label style="-fx-font-size: 22; -fx-font-weight: bold; -fx-text-fill: #004a80;" text="Meus Contratos" />

                                        <ListView fx:id="listViewContratos" prefHeight="360" style="-fx-background-radius: 12; -fx-border-color: #d4e6ff; -fx-border-radius: 12;" />

                                        <!-- BOTOES CONTRATOS -->
                                        <HBox alignment="CENTER" spacing="12">

                                            <children>

                                                <Button onAction="#handleChatComClienteDoContrato" prefWidth="120" style="-fx-background-color: #007fff; -fx-text-fill: white; -fx-background-radius: 12;" text="Chat" />

                                                <Button onAction="#handleAceitarContrato" prefWidth="120" style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-background-radius: 12;" text="Aceitar" />

                                                <Button onAction="#handleMarcarConcluido" prefWidth="120" style="-fx-background-color: #ff4b4b; -fx-text-fill: white; -fx-background-radius: 12;" text="Feito" />

                                                <Button onAction="#handleVerPerfilDoCliente" prefWidth="120" style="-fx-background-color: #6c63ff; -fx-text-fill: white; -fx-background-radius: 12;" text="Perfil" />

                                                <Button onAction="#handleVerItensContrato" prefWidth="120" style="-fx-background-color: #6c63ff; -fx-text-fill: white; -fx-background-radius: 12;" text="Itens" />

                                                <Button onAction="#handleVerProjetoDoContrato" prefWidth="120" style="-fx-background-color: #6c63ff; -fx-text-fill: white; -fx-background-radius: 12;" text="Projeto" />

                                                <Button fx:id="btnExcluirContrato" onAction="#handleExcluirContrato" prefWidth="120" style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-background-radius: 12;" text="Excluir" visible="false" managed="false" />

                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>

                                <!-- MINHAS AVALIAÇÕES -->
                                <VBox fx:id="vboxAvaliacoes" alignment="TOP_CENTER" prefWidth="450" spacing="15" style="-fx-background-color: #ffffff; -fx-border-color: #c7ddf7; -fx-border-radius: 14; -fx-background-radius: 14;">

                                    <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>

                                    <children>

                                        <Label style="-fx-font-size: 22; -fx-font-weight: bold; -fx-text-fill: #004a80;" text="Minhas Avaliações" />

                                        <ListView fx:id="listViewMinhasAvaliacoes" prefHeight="360" style="-fx-background-radius: 12; -fx-border-color: #d4e6ff; -fx-border-radius: 12;" />

                                    </children>
                                </VBox>

                                <!-- MENSAGENS ENVIADAS (oculta por padrão) -->
                                <VBox fx:id="viewMensagensEnviadas" alignment="TOP_CENTER" prefWidth="450" spacing="10" visible="false" managed="false" style="-fx-background-color: #ffffff; -fx-border-color: #c7ddf7; -fx-border-radius: 14; -fx-background-radius: 14;">
                                    <padding><Insets bottom="12" left="12" right="12" top="12" /></padding>
                                    <children>
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <children>
                                                <Button text="← Voltar" onAction="#handleVoltarMensagens" style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-background-radius: 8;" />
                                                <Label style="-fx-font-size: 20; -fx-font-weight: bold; -fx-text-fill: #004a80;" text="Mensagens Recebidas" />
                                            </children>
                                        </HBox>
                                        <ListView fx:id="listViewMensagensEnviadas" prefHeight="340" style="-fx-background-radius: 12; -fx-border-color: #d4e6ff; -fx-border-radius: 12;" />
                                    </children>
                                </VBox>
                            </children>
                        </HBox>

                    </center>

                </BorderPane>
            </children>
        </StackPane>
    </children>

</AnchorPane>
